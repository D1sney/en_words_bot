# English Words Learning Bot ğŸ“š

An intelligent Telegram bot that helps you learn English words through AI-generated exercises with spaced repetition algorithm.

## Features

- ğŸ¤– **AI-Powered Tasks**: Unique exercises generated by AI for each word (translations, multiple choice)
- ğŸ“Š **Progress Tracking**: Adaptive learning system that tracks your knowledge level (0-100%)
- â° **Scheduled Learning**: Automatic task delivery every 30 minutes (customizable)
- ğŸ”„ **Spaced Repetition**: Smart review intervals based on the Leitner system
- â• **Custom Vocabulary**: Add your own words to practice
- ğŸ˜´ **Flexible Schedule**: "Do Not Disturb" mode and wake/sleep controls
- ğŸ“ˆ **Statistics**: View your learning progress and performance

## Tech Stack

- **Python 3.11+**
- **aiogram 3** - Telegram Bot API framework
- **SQLAlchemy 2.0** - Async ORM with SQLite
- **OpenRouter AI** - AI task generation and answer validation
- **APScheduler** - Periodic task scheduling
- **Pydantic** - Data validation and settings management

## Project Structure

```
en_words_bot/
â”œâ”€â”€ main.py                    # Application entry point
â”œâ”€â”€ config/
â”‚   â””â”€â”€ settings.py            # Configuration and constants
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ models.py              # SQLAlchemy models
â”‚   â”œâ”€â”€ database.py            # Database connection
â”‚   â””â”€â”€ crud.py                # CRUD operations
â”œâ”€â”€ services/
â”‚   â””â”€â”€ ai_service.py          # OpenRouter AI integration
â”œâ”€â”€ bot/
â”‚   â”œâ”€â”€ keyboards.py           # Telegram keyboards
â”‚   â””â”€â”€ handlers/              # Message and callback handlers
â”œâ”€â”€ scheduler/
â”‚   â””â”€â”€ tasks.py               # Periodic task scheduling
â””â”€â”€ requirements.txt
```

## Installation

### 1. Clone the repository

```bash
git clone https://github.com/D1sney/en_words_bot.git
cd en_words_bot
```

### 2. Create virtual environment

```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

### 3. Install dependencies

```bash
pip install -r requirements.txt
```

### 4. Configure environment variables

Create a `.env` file in the project root:

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=your_bot_token_from_botfather

# OpenRouter AI
OPENROUTER_API_KEY=your_openrouter_api_key
OPENROUTER_MODEL=nvidia/nemotron-nano-12b-v2-vl:free

# Database
DATABASE_URL=sqlite+aiosqlite:///./bot.db

# Bot Settings
DEFAULT_INTERVAL_MINUTES=30
```

**How to get tokens:**

- **Telegram Bot Token**: Message [@BotFather](https://t.me/botfather) on Telegram â†’ `/newbot`
- **OpenRouter API Key**: Register at [OpenRouter.ai](https://openrouter.ai/) â†’ Get free API key

### 5. Run the bot

```bash
python main.py
```

## Usage

### Basic Commands

- `/start` - Initialize the bot and load starter words
- `ğŸŒ… Ğ¯ Ğ¿Ñ€Ğ¾ÑĞ½ÑƒĞ»ÑÑ` - Activate the bot (start receiving tasks)
- `ğŸ˜´ Ğ›ĞµĞ³ ÑĞ¿Ğ°Ñ‚ÑŒ` - Deactivate the bot (stop receiving tasks)
- `â• Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ»Ğ¾Ğ²Ğ¾` - Add a new word to your vocabulary
- `â¸ ĞĞµ Ğ±ĞµÑĞ¿Ğ¾ĞºĞ¾Ğ¸Ñ‚ÑŒ` - Enable "Do Not Disturb" mode (30min/1h/2h/3h)
- `ğŸ“Š ĞœĞ¾Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°` - View your learning statistics

### Task Types

1. **Translation to English**: Translate a Russian sentence to English
2. **Translation to Russian**: Translate an English sentence to Russian
3. **Multiple Choice (ENâ†’RU)**: Choose the correct Russian translation
4. **Multiple Choice (RUâ†’EN)**: Choose the correct English translation

### Learning Algorithm

The bot uses a **spaced repetition** system based on the Leitner method:

- **0-20% knowledge**: Review every 30 minutes
- **21-50% knowledge**: Review every 4 hours
- **51-70% knowledge**: Review every day
- **71-89% knowledge**: Review every 3 days
- **90-100% knowledge**: Review every week

**Progress updates:**
- âœ… Correct answer: +15% knowledge
- âŒ Incorrect answer: -10% knowledge

## Database Schema

### Users
- `telegram_id` - User's Telegram ID
- `is_active` - Wake/sleep status
- `interval_minutes` - Task frequency
- `do_not_disturb_until` - DND mode timestamp

### Words
- `word_en` - English word
- `word_ru` - Russian translation

### UserWordProgress
- `knowledge_percent` - Learning progress (0-100%)
- `next_review_at` - Next scheduled review
- `correct_answers_count` / `total_answers_count` - Statistics

### TaskHistory
- `task_type` - Type of exercise
- `task_content` - JSON with task data
- `user_answer` - User's response
- `is_correct` - Validation result
- `ai_feedback` - AI's feedback

## Configuration

Edit constants in `config/settings.py`:

```python
class LearningConfig:
    # Answer impact on knowledge
    CORRECT_ANSWER_BOOST = 15      # +15% for correct answer
    INCORRECT_ANSWER_PENALTY = 10  # -10% for incorrect answer

    # Review intervals (in hours)
    REVIEW_INTERVALS = {
        (0, 20): 0.5,      # Every 30 minutes
        (21, 50): 4,       # Every 4 hours
        (51, 70): 24,      # Every day
        (71, 89): 72,      # Every 3 days
        (90, 100): 168,    # Every week
    }
```

## AI Integration

The bot uses **OpenRouter API** to generate unique tasks and validate answers:

- **Task Generation**: Creates diverse exercises with the target word
- **Answer Validation**: Checks translations considering synonyms and grammar variations
- **Feedback**: Provides constructive comments on user's answers

**Note**: The free tier model `nvidia/nemotron-nano-12b-v2-vl:free` is used by default. You can switch to paid models for better quality.

## Future Improvements

- [ ] Support for multiple translations per word
- [ ] More task types (sentence building, audio tasks)
- [ ] Vocabulary import from files
- [ ] User-defined learning intervals
- [ ] Multi-language support (Chinese, French, etc.)
- [ ] Web dashboard for progress visualization
- [ ] Achievements and gamification

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## License

This project is open source and available under the [MIT License](LICENSE).

## Author

Created by [D1sney](https://github.com/D1sney)

---

**Note**: This bot was developed as an MVP (Minimum Viable Product) and may be extended with additional features in the future.
